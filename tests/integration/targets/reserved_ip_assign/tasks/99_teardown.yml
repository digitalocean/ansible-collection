---
- block:

    - name: Teardown | Delete reserved IPs (cleanup any created during tests)
      digitalocean.cloud.reserved_ip:
        state: absent
        token: "{{ digitalocean_token }}"
        floating_ip: "{{ reserved_ip | default('') }}"
      ignore_errors: true

    - name: Teardown | Delete reserved IP created only (if exists)
      digitalocean.cloud.reserved_ip:
        state: absent
        token: "{{ digitalocean_token }}"
        floating_ip: "{{ reserved_ip_created_only | default('') }}"
      ignore_errors: true

    - name: Teardown | Delete Droplet
      digitalocean.cloud.droplet:
        state: absent
        token: "{{ digitalocean_token }}"
        name: "{{ droplet_name }}"
        region: "{{ droplet_region }}"
        unique_name: true
      ignore_errors: true

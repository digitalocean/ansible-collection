---
- name: 00_setup | Get account information for email
  digitalocean.cloud.account_info:
    token: "{{ digitalocean_token }}"
  register: account_result

- name: 00_setup | Set account email
  ansible.builtin.set_fact:
    account_email: "{{ account_result.account.email }}"

- name: 00_setup | Create Uptime check
  digitalocean.cloud.uptime_check:
    state: present
    token: "{{ digitalocean_token }}"
    name: "{{ check.name }}"
    unique_name: true
    type: "{{ check.type }}"
    target: "{{ check.target }}"
    regions: "{{ check.regions }}"
    enabled: "{{ check.enabled }}"
  register: check_result

- name: 00_setup | Set check ID
  ansible.builtin.set_fact:
    check_id: "{{ check_result.check.id }}"
